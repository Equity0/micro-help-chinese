复制和粘贴是 micro 中的基本功能，但可能有些令人困惑，尤其是在通过 SSH 运行 micro 时。
由于有多种复制和粘贴的方法，要想正确地进行复制和粘贴是很混乱的。
本帮助文档将解释复制和粘贴的各种方法，它们如何工作，以及在 SSH 上这样做的最佳方法。

# OSC 52 (终端剪贴板)

如果可能的话，将 `clipboard` 选项设置为 `terminal` 会产生最好的效果，因为它可以在 SSH 和本地工作。
然而，有些终端模拟器对终端剪贴板(使用 OSC 52 协议来通信剪贴板内容)的支持是有限的。
下面是一些终端模拟器对该协议的支持情况。

* `Kitty`：支持，但默认情况下只启用了写入。要启用读取的话，
  请将 `read-primary` 和 `read-clipboard` 添加到 `clipboard_control` 选项。

* `iTerm2`：只支持复制（写到剪贴板）。
  必须在 `Preferences->General-> Selection->Applications in terminal may access clipboard` 中启用后，
  才可以使用 Command-v 来粘贴。

* `st`: 支持。

* `rxvt-unicode`: 原生不支持，但有一个Perl扩展。
   [这里]（http://anti.teamidiot.de/static/nei/*/Code/urxvt/）。

* `xterm`：支持，但默认是禁用的。可以把 `XTerm*disallowedWindowOps: 20,21,SetXprop` 
   写入到  `Xresources` 或 `.Xdefaults` 中启用。

* `gnome-terminal`: 不支持OSC 52.

* `alacritty`：支持。

* `foot`: 支持。

**总结：**如果你想在 SSH 上进行复制和粘贴，应该把 `clipboard` 设置为 `terminal` ，并确保你的终端支持OSC 52。

# 粘贴

## 建议 (TL;DR)

推荐的粘贴方法如下。

* 如果你不是通过SSH工作，使用 micro 快捷键（Ctrl-v 默认情况下）来进行粘贴。如果在Linux上，请安装 `xclip` 或 `xsel`。
* 如果你在SSH上工作，使用终端快捷键( Ctrl-Shift-v 或 Command-v ) 来执行粘贴。
  如果你的终端不支持括号内的粘贴，在执行粘贴时，首先启用 `paste` 选项，并在完成后禁用该选项。

## Micro 粘贴事件

Micro 是一个在终端内运行的应用程序。这意味着终端发送 micro 事件，如按键事件、鼠标事件、大小事件和粘贴事件。
Micro 粘贴的默认快捷键是 Ctrl-v 。这意味着，当 Micro 收到按键事件时，它将会试图访问系统剪贴板并实现粘贴。
系统剪贴板会访问 MacOS 上的 `pbpaste` (默认安装)，或Linux上的 `xclip` 或 `xsel` （由用户安装），
或Windows上的系统调用。

## 终端粘贴事件

对于某些按键，终端不会发送事件给 micro ，而是自己做一些事情。
在本文档中，这种按键将被称为 “终端快捷键”。通常情况下，终端模拟器会有一个用于粘贴和复制的终端快捷键。
在 MacOS 上是 Command-v 和 Command-c ，Linux 上是 Ctrl-Shift-v 和 Ctrl-Shift-c。
当粘贴的“终端快捷键”被执行时，你的终端将访问系统剪贴板，并发送一个粘贴事件或一个按键事件列表（每个按键对应一个粘贴的字符），具体取决于你的终端是否支持发送粘贴事件（称为 bracketed paste ）。

如果你的终端支持 bracketed paste ，那么它将发送一个粘贴事件，一切都会顺利进行。
然而，如果你的终端发送一系列的按键事件，这可能会导致问题，因为 micro 会认为你手动输入了每一个字符，
并可能添加闭合的括号或自动缩进，这将扰乱粘贴的文本。为了避免这种情况，你可以在进行粘贴时暂时启用 `paste` 选项，
当 `paste` 选项开启时，micro 会将一系列的按键事件整合成一个较大的粘贴事件。
在正常使用过程中，禁用 `paste` 选项是个好主意。因为如果你正在快速打字，终端会将按键事件作为字符列表发送，而这些字符实际上是手动输入的。

## 通过 SSH 粘贴

当使用 SSH 工作时，micro 在远程机器上运行，而你的终端在本地机器上运行。
因此，当你要粘贴时，使用 Ctrl-v （ micro 的绑定键）将不能工作，因为当 micro 试图访问系统剪贴板时，
它将访问远程机器的剪贴板而不是本地机器的剪贴板。另一方面，“终端快捷键”将访问你的本地剪贴板，
并将文本作为粘贴事件发送给远程机器，这正是你想要的。

# 复制

# 建议 (TL;DR)

推荐的复制方法如下。

* 如果你不是通过 SSH 工作，使用 micro 复制键（默认为 Ctrl-c ）进行复制。
  如果在 Linux 上，请事先安装 `xclip` 或 `xsel`。

* 如果你在 SSH 上工作，使用终端快捷键 ( Ctrl-Shift-c 或 Command-c ) 来复制。
  你必须首先禁用 `mouse` 选项来执行终端选择，并且你可能希望禁用行号和差异指示器 ( `ruler` 和 `diffgutter` 选项)，
  并关闭其他拆分窗口。这种方法只能复制屏幕上显示的字符（你将不能复制超过一页的内容）。

复制的讨论与上面关于粘贴的讨论类似。
主要的区别是，在执行复制之前，必须告诉进行复制操作的应用程序哪些文本需要被复制。

Micro 有一个用于复制的按键（Ctrl-c），并将访问系统的剪贴板来执行复制。
Micro 复制到的文本是在当前 Micro 中选择的文本（通常这样的文本是通常这种文本是以白色背景显示的）。 
当 `mouse` 选项被启用时。鼠标可以用来选择文本，就像一些快捷键，比如 ShiftLeft，等等。

终端也有一个快捷键（Ctrl-Shift-c 或 Command-c）来进行复制，
而它所复制的文本是由终端选择的文本（*不是* micro 的选择）。
要用终端的选择来选择文本，必须首先关闭 micro 的 `mouse` 支持，即关闭。
终端，与 micro 不同，没有对不同的缓冲区/拆分窗口，以及显示的不同字符是什么。
这意味着，使用终端选择复制多行时，你应该首先应该禁用行号和差异指示器（关闭 `ruler` 和 `diffgutter` 选项），
否则它们可能是你选择的一部分并被复制。
